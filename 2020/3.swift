////  main.swift
//  AdventOfCodeTest
//

import Foundation

let forest_big: [String] = [
    ".#..........#......#..#.....#..",
    "....#.............#.#....#..#..",
    ".....##...###....#..#.......#..",
    ".#....#..#......#........#.....",
    ".#.........###.#..........##...",
    "...............##........#.....",
    "#..#..........#..##..#....#.#..",
    "....#.##....#..#...#.#....#....",
    "...###...#............#.#......",
    "#.........#..#...............#.",
    "#.#...........#...............#",
    "..#.#......#..###.#...#..##....",
    ".....#..#..#..#............#...",
    "......#.......#.....#....##....",
    "#......#...#.......#.#.#.......",
    "...........##.#.............#..",
    ".#.........#..#.####...........",
    "..#...........#....##..........",
    "#...........#.......#..#.#.....",
    ".....##...#.....#..##..#..#....",
    "#.#..........................#.",
    "##.....#..........#.......##..#",
    "....#..#............#.#.#......",
    ".......#.......#..#............",
    "...#.#..........#..#.....#.....",
    ".....#...##..##.....##........#",
    ".#.....#........##............#",
    "..#....#.#...#.....#.##........",
    "........##.....#......##...##..",
    "......#..................#.....",
    "..##......##.....##...##.......",
    "......#..#...##......##........",
    ".#..#..#.#.....................",
    ".#....#.#...#....#.......##...#",
    ".####.#..##...#.#.#....#...#...",
    ".#....#.....#...#..#.........##",
    "...........#.#####.#.#..##..#..",
    ".#......##...#..###.#.#....#...",
    "...#.....#........#..###...#...",
    ".......#................##.#...",
    ".##...#.#..................#...",
    "..#........#....#..........#..#",
    "..#.........#..................",
    "...#.#..........#.#..##........",
    "...#.##..........##...........#",
    "...........#..#........#.......",
    ".#....#.#...........#....#.##..",
    ".#...#..#............#....#.#..",
    "...#..#...#.........####.#.#...",
    "..#...#...........###..#...##.#",
    "......##...#.#.#....##....#....",
    "#..#.#.....##....#.......#...#.",
    ".#.....#.....#..#..##..........",
    "................#.#.#...##.....",
    ".#.....#............#......#...",
    "...#...#..#.#....######.....#..",
    "..#..........##......##.....#..",
    "......#..#.##...#.#............",
    "....#.......#..#...#..#.#......",
    "#......##.#..#........#.....#..",
    "..#.........#..#.........#.....",
    "..#.........##.......#.#.#..##.",
    "...#....##.................#.#.",
    "...#........##.#.......#.##..##",
    "....#.#...#...#....#...........",
    ".........#....##........#......",
    "...#........#..#.......#...#...",
    "#.......#....#...#...........#.",
    ".......#......#...##...........",
    ".#.#......##.#.......#..#...#..",
    ".#.....##.#...#......#..#......",
    "........#.............#.#..#..#",
    "#...........#....#.....#.##.#.#",
    "................#...#........##",
    "#..#.##..#.....#...##.#........",
    "#.....#.#..##......#.#..#..###.",
    "....#...#.....#................",
    "......#...#..##...........#....",
    "......#.........##.#...#......#",
    "#...#.#.....#..#.#..#..#......#",
    "...#.#..#..#.#........###.#....",
    "..#...#.......#.#.......#......",
    "...#....#.....#.......#......#.",
    "#...........#....#..#..#.......",
    "..........##......##.........##",
    "##............#..#.#...#..#.#..",
    "..#.##....##...##..#...#.......",
    "............##.##..###..#..#...",
    "......#....##...##.........#...",
    "......#..#.#......####..#......",
    "..............#....#..#..##....",
    "...#.#..#...##.#.......#.#.....",
    "...#.#....#.......#..#..#..##..",
    "..........#.........#..........",
    "...#.....#............#.....##.",
    "....#.#......................#.",
    ".........#...#.#...#...........",
    "...#........#..##.....#...#.#..",
    "......##.....#.#..#...###.#...#",
    "#....#..#.#.....#...#..........",
    ".#.##.###.........#..##.#....#.",
    "#.........#....#........#...#..",
    "...........#...............#..#",
    "###....................#....#..",
    ".................#....#.....#..",
    "..........#.........#.......#..",
    "........#..#....#.....##.......",
    "#...##.#...#.#.#............#..",
    "....#.........##.#.#..#...###..",
    ".##..............#...#.....##.#",
    "###...#..................#...#.",
    ".....#..#...#..#...#...........",
    ".#.................#...#..#..#.",
    ".#.........###...#.##......###.",
    ".####............#......#..#...",
    "....#........#..#.#....#..##..#",
    "..#....#.#...#.#.....##....#...",
    "..###..#..#....##....#..#..#...",
    "...#.#.....#.#....#.....#......",
    ".....#..........#.#............",
    ".......#...........#.#..#..#...",
    "......##........#.....#.......#",
    "..#.#.....##............#..##..",
    "....#.#........#...........##..",
    "#......#..##........#.....#....",
    "#...#...###..............##....",
    "#..#........#........#.....##.#",
    "......##.####........#..#....#.",
    "...##..#.##.....#...#...#..#...",
    "#..............###.##..##......",
    "......................#.....#..",
    ".........#.#.......#...##.#....",
    "....#......#..........###..#...",
    "#...####.#.................#..#",
    "##.#....#....#.....##..#....#.#",
    "..#.....#..##.........#.#..#.#.",
    ".....#.....#...................",
    "#....##.#.........###....#.....",
    "#........#.#.......#.#.........",
    ".##.#...#.....#...#.......##.##",
    "#..#.............#.............",
    "..........#.........####.......",
    "..##..............#..#.#.......",
    "..#.#.....#........#......##...",
    "#.#.......#.#................#.",
    ".#...#........#....##....#.##..",
    ".#..#...#...#......#.#.........",
    "......##............#.........#",
    ".#....#.#.#.........#..#..##...",
    "#....#......#.......###........",
    ".......#........##..#...#..###.",
    "#.##..........#..###..#..#.#...",
    ".#..#....#..........#.#.##.....",
    "#..#...#.#...#..#..#.#...#.....",
    ".........#...#.#............#..",
    "#..#.............#......##.##..",
    "...##.......#..................",
    "....#......#...#.....#......#..",
    ".....##..#......#....#....#....",
    "....#...#...#...#.....#........",
    ".#....#........##....#..#.#...#",
    "#.......#..#......#......#...#.",
    "..............#......#......#..",
    "#......#..##...#........#....#.",
    "#..#..#..#.....#..#........#...",
    "#...#.....#...#..........#...##",
    "........#.......#...#.....#.#..",
    "...................##.......#..",
    ".#......#........#.##..#....#..",
    ".....#.....#...#..#..#......#..",
    "........##.#..##.........#....#",
    ".........#.......#.............",
    "............#.###.###..#.#.....",
    ".............#....#...........#",
    "..#.....#.#..##.##........#....",
    "...#....#....#.........#.....#.",
    ".#............#......#.........",
    "..#.#..........##.##......#.#..",
    "....#.........................#",
    "..........##...................",
    "#.......#.#..............#...#.",
    "...##..#..##...##.#..#.#.#.....",
    "...########.#..##....#.........",
    "##.#........##.....#........#..",
    "#.#.....#........#..#....#...#.",
    "..#............#.......###.##.#",
    "#.#............................",
    "...#.#.#....#..........#..#....",
    "..###.#.....#.#..#.............",
    "#........#..........#.#..#.....",
    "...........#..#....#.........#.",
    "..#............#.....#.#.......",
    "#.#............#..#.....#.#.#..",
    "...#...#.......................",
    ".#.#.#...##.............#..#..#",
    "..#.........#..#.....##....##..",
    ".#...#............#.......#..##",
    "....#..#.#.#...####............",
    "#.......#....#..##....##....#..",
    ".....##.#....#.#..#.......#....",
    "...........#.......#....##.#.##",
    "..........#...#....##...#.#....",
    "..#.............#.............#",
    "....#..#.....#....#.#..###.#...",
    ".......#.##.#......#...##...#.#",
    ".#..#.#..#.#.......#....###.#..",
    "#..........##...##.........##..",
    "##..#......##.#.####.#.....#...",
    "....#.#...#........#..##..#.#..",
    ".#.............................",
    ".##..#.#...##.....#....#.....#.",
    "..##.........#......#.........#",
    ".#.#........#...#.#.#....##....",
    ".#.................##.........#",
    "...#...............#....#......",
    "..#...#..#..........###..#...##",
    "..........#..#..........##..#..",
    "...#.............#.##.#...#....",
    "...#...........#...............",
    "......#.........##.#...#...#...",
    "...#.#........#..#.....#..#...#",
    "#.#...#....##...#.....#....#...",
    "#.#.#..#.....#.........#.......",
    "##...........#..####...........",
    "#..........#........###...#..#.",
    "#..#.......#....#......###.....",
    "..#.....#......#.###......##...",
    "...#.##..#............#...#....",
    ".##........#.....#.............",
    "#....#.##..#...........##.#.#..",
    "..#.....#.#....#.......#......#",
    "#..#.......#............#......",
    "#.......##....#...#..#.........",
    ".................#..##.........",
    "..............#..#..#.##.......",
    "#.#.......................#..#.",
    "..#..##...........#....#..#..#.",
    "...#....#.......#.......#....#.",
    ".....#.#..#.#.....#.........#.#",
    "..#.#.........#.....#..........",
    "...#.#.#.......#.#.......#.#..#",
    "...##...#.#.#.....#.....##....#",
    "##.......#.#.#.#.......#...##..",
    "....#.#...........#......#.....",
    ".#.....#........####...........",
    "#......#........#.....#..#..#..",
    "..#..#......#...##.......#....#",
    "#........#..........#.....#.#..",
    ".#...........#.....#.....#.....",
    "..........#..#...#....#....##..",
    ".....#.#..........#.....##..#..",
    "......#.........##.............",
    "..#..#.....##......##........#.",
    ".#.#.#.#..#.#..#.......#.......",
    "#.#...####.#.#....#.#........#.",
    "....#...#.....#......#..##.....",
    "##.........#.........#..#.#..#.",
    "..#.#........#.#........#.##...",
    "#....#......#...#....#.........",
    ".##.............###....###.#...",
    "..##.#.......#...#..#......#...",
    ".....#.##..................#...",
    ".....#.#...#..#................",
    "........#..#..#...........#.#.#",
    "....#.###.....#..#.#.....##..##",
    "....##.#.........#..##.........",
    ".##........#......#..###..#.##.",
    ".........##...............#.##.",
    "..#...............#.#...#..#.#.",
    "....#....##.....#...#..#.....#.",
    "#...#.....................#....",
    ".....#.#............#...##.#.#.",
    "...#......#.......#........##.#",
    ".#.#..#.#....#.##.......##....#",
    ".........#...#..##.........#...",
    ".#...#..#....................#.",
    ".......#...#........#.#..#.#.##",
    ".#.............#......#..#.#...",
    "............##.........#....#.#",
    "#.........##..##...............",
    ".#.#....#.#..#..........##.....",
    "..###...#..#.#.......#..#...##.",
    ".....#....#.#............##.#..",
    "##.....#.#..#..#...............",
    "...##...#......#....#..#..#....",
    ".............#....#..#..##...##",
    "#.......#............#....##..#",
    "..#.##.....#.......#....#....#.",
    "..........#...#.............###",
    "..#....#.#..................#..",
    "#.#...#..#...........#.........",
    "....##..#..##..#..........#....",
    "#...#...#.#....#.##...#.......#",
    "#......##.#...##..#.....#......",
    "....#.......#.#............#...",
    "#....#...........###...........",
    "#..#...#...#......#.#..#.......",
    "...............................",
    "#........##.............#.#....",
    ".............#........#....#.##",
    "........##.####.....##..#......",
    "#.#.#.#.......##....##.....#...",
    ".......#..##..#...#............",
    "..........#...#....#..#.#.#.##.",
    "...#........##....#...#........",
    "#..#.##....#....#........#.....",
    ".##...#.....##...#.............",
    ".#...#..#.#.....#.##.....#.....",
    "...........#.............#...#.",
    ".#..#................#...#..#..",
    "#..........#......##..##....#..",
    "####..#...........#.#....#.....",
    "..#.#.##..#...##........#....##",
    ".#.......##........#.....#.....",
    "............#................#.",
    ".#...#...#.....#.#....#.##..#..",
    "..#.............#.#....#.#.....",
    "..............#...........#....",
    "..............#........#....#..",
    "..........##........#..#...#...",
    "...#.#....#.#....#..#.....#...#",
    "..#......#...........#..#..#.#.",
    ".....##.....#.####....#........"
]

let forest_small: [String] = [
    "..##.......",
    "#...#...#..",
    ".#....#..#.",
    "..#.#...#.#",
    ".#...##..#.",
    "..#.##.....",
    ".#.#.#....#",
    ".#........#",
    "#.##...#...",
    "#...##....#",
    ".#..#...#.#"
]

func countTrees(forest: [String], stepX: Int, stepY: Int) -> Int {
    let MAX_Y = forest.count
    let MAX_X = forest[0].count
    var curX = 0
    var curY = 0

    var result = 0

    while curY < MAX_Y {
        let line = forest[curY];
        let index = line.index(line.startIndex, offsetBy: curX);
        let char = line[index]
        
        if (char == "#") {
            result += 1
        }
        
        curX = (curX + stepX) % MAX_X;
        curY += stepY
    }

    return result;
}

let trees = [(1, 1), (3, 1), (5, 1), (7, 1), (1, 2)].map { (stepX, stepY) in
    return countTrees(forest: forest_big, stepX: stepX, stepY: stepY)
}

print(trees);
print(trees.reduce(1, *));
